// Weapon upgrade cards (stackable, town-reset). No phial dependencies.
// `mods` are consumed by StatsSystem today; `dial` is the forward-looking schema for behavior systems.

const C = "common";
const U = "uncommon";
const R = "rare";
const E = "epic";

export const SKILLS = [
  // -------------------------
  // HAMMER (Fire + Occult)
  // -------------------------
  {
    id: "h_ember_brand",
    cls: "hammer",
    name: "Ember Brand",
    desc: "Burn lasts longer. (+10% duration)",
    rarity: C,
    max_stacks: 8,
    dial: { type: "status", statusId: "hammer:burn", stateMods: { hammerBurnDurationMult: 0.1 } },
    mods: {},
  },
  {
    id: "h_cinderwake",
    cls: "hammer",
    name: "Cinderwake",
    desc: "Orbits leave a brief burning trail.",
    rarity: C,
    max_stacks: 6,
    dial: { type: "weaponState", stateMods: { hammerTrailEnable: 1, hammerTrailDurationMult: 0.15 } },
    mods: {},
  },
  {
    id: "h_hot_iron",
    cls: "hammer",
    name: "Hot Iron",
    desc: "+10% power per stack.",
    rarity: C,
    max_stacks: 6,
    dial: { type: "stat", mods: { dmgMult: 0.1 } },
    mods: { dmgMult: 0.1 },
  },
  {
    id: "h_wide_arc",
    cls: "hammer",
    name: "Wide Arc",
    desc: "Orbits hit a wider area.",
    rarity: C,
    max_stacks: 5,
    dial: { type: "weaponState", stateMods: { hammerHitRadiusAdd: 1 } },
    mods: {},
  },
  {
    id: "h_forge_tempo",
    cls: "hammer",
    name: "Forge Tempo",
    desc: "Hammer cooldown slightly reduced.",
    rarity: U,
    max_stacks: 5,
    dial: { type: "weaponState", stateMods: { hammerCooldownMult: -0.05 } },
    mods: {},
  },
  {
    id: "h_coalheart",
    cls: "hammer",
    name: "Coalheart",
    desc: "Burning foes take more hammer damage.",
    rarity: U,
    max_stacks: 5,
    dial: { type: "status", statusId: "hammer:coalheart", stateMods: { hammerBurnDamageTakenMult: 0.05 } },
    mods: {},
  },
  {
    id: "h_smelters_reach",
    cls: "hammer",
    name: "Smelter's Reach",
    desc: "Orbits reach farther / linger longer.",
    rarity: U,
    max_stacks: 4,
    dial: { type: "weaponState", stateMods: { hammerMaxRadiusMult: 0.08, hammerSpinTimeMult: 0.08 } },
    mods: {},
  },
  {
    id: "h_ignition_threshold",
    cls: "hammer",
    name: "Ignition Threshold",
    desc: "Burn stacks can pop into a flare hit.",
    rarity: U,
    max_stacks: 4,
    dial: { type: "status", statusId: "hammer:ignite", stateMods: { hammerIgniteEnable: 1, hammerIgniteCoeffMult: 0.1 } },
    mods: {},
  },
  {
    id: "h_pyre_burst",
    cls: "hammer",
    name: "Pyre Burst",
    desc: "Burning enemies explode on death.",
    rarity: R,
    max_stacks: 1,
    isKeystone: true,
    dial: { type: "weaponState", stateMods: { hammerPyreBurstEnable: 1 } },
    mods: {},
  },
  {
    id: "h_searing_spiral",
    cls: "hammer",
    name: "Searing Spiral",
    desc: "Burn ticks faster while orbits persist.",
    rarity: R,
    max_stacks: 3,
    dial: { type: "weaponState", stateMods: { hammerBurnTickRateMult: 0.08 } },
    mods: {},
  },
  {
    id: "h_occult_soul_brand",
    cls: "hammer",
    name: "Occult: Soul Brand",
    desc: "Hammer hits apply a delayed soul detonation.",
    rarity: R,
    max_stacks: 3,
    dial: { type: "status", statusId: "hammer:soulBrand", stateMods: { hammerSoulBrandEnable: 1, hammerSoulBrandCoeffMult: 0.1 } },
    mods: {},
  },
  {
    id: "h_keystone_forge_pact",
    cls: "hammer",
    name: "Occult Keystone: Forge Pact",
    desc: "Sustain burning foes to build Heat and empower orbits.",
    rarity: E,
    max_stacks: 1,
    isKeystone: true,
    dial: { type: "weaponState", stateMods: { hammerForgePactEnable: 1 } },
    mods: {},
  },

  // -------------------------
  // PISTOL (Air + Occult)
  // -------------------------
  {
    id: "p_windup_bearings",
    cls: "pistol",
    name: "Windup Bearings",
    desc: "Ramp to Cyclone faster.",
    rarity: C,
    max_stacks: 8,
    dial: { type: "weaponState", stateMods: { pistolWindupGainMult: 0.12 } },
    mods: {},
  },
  {
    id: "p_breath_control",
    cls: "pistol",
    name: "Breath Control",
    desc: "Cyclone lasts longer; windup decays slower.",
    rarity: C,
    max_stacks: 6,
    dial: { type: "weaponState", stateMods: { pistolCycloneDurationMult: 0.12, pistolWindupDecayMult: -0.08 } },
    mods: {},
  },
  {
    id: "p_recoil_discipline",
    cls: "pistol",
    name: "Recoil Discipline",
    desc: "+5% attack speed per stack.",
    rarity: C,
    max_stacks: 5,
    dial: { type: "stat", mods: { atkSpd: 0.05 } },
    mods: { atkSpd: 0.05 },
  },
  {
    id: "p_gust_spray",
    cls: "pistol",
    name: "Gust Spray",
    desc: "Cyclone periodically emits a gust hit.",
    rarity: U,
    max_stacks: 4,
    dial: { type: "weaponState", stateMods: { pistolGustEnable: 1, pistolGustRateMult: 0.12 } },
    mods: {},
  },

  // Pierce path (mutually exclusive with ricochet path)
  {
    id: "p_fmj_throughline",
    cls: "pistol",
    name: "FMJ: Throughline",
    desc: "+1 pierce per stack. (Locks Trickshot path)",
    rarity: C,
    max_stacks: 5,
    exclusiveGroup: "pistol:path",
    exclusiveKey: "pierce",
    flagAdds: ["pistol:path:pierce"],
    dial: { type: "stat", mods: { hexPierce: 1 } },
    mods: { hexPierce: 1 },
  },
  {
    id: "p_keystone_air_lance",
    cls: "pistol",
    name: "Keystone: Air Lance",
    desc: "During Cyclone, bullets lance through lines of foes.",
    rarity: R,
    max_stacks: 1,
    isKeystone: true,
    exclusiveGroup: "pistol:path",
    exclusiveKey: "pierce",
    requiresAny: ["pistol:path:pierce"],
    dial: { type: "weaponState", stateMods: { pistolAirLanceEnable: 1 } },
    mods: {},
  },

  // Ricochet path
  {
    id: "p_trickshot_angled",
    cls: "pistol",
    name: "Trickshot: Angled Shot",
    desc: "+1 ricochet per stack. (Locks FMJ path)",
    rarity: C,
    max_stacks: 5,
    exclusiveGroup: "pistol:path",
    exclusiveKey: "ricochet",
    flagAdds: ["pistol:path:ricochet"],
    dial: { type: "stat", mods: { hexBounce: 1 } },
    mods: { hexBounce: 1 },
  },
  {
    id: "p_keystone_pinball_cyclone",
    cls: "pistol",
    name: "Keystone: Cyclone Pinball",
    desc: "Cyclone ricochets retarget aggressively.",
    rarity: R,
    max_stacks: 1,
    isKeystone: true,
    exclusiveGroup: "pistol:path",
    exclusiveKey: "ricochet",
    requiresAny: ["pistol:path:ricochet"],
    dial: { type: "weaponState", stateMods: { pistolPinballEnable: 1 } },
    mods: {},
  },

  // Occult layer (works with either path)
  {
    id: "p_occult_hex_mag",
    cls: "pistol",
    name: "Occult: Hex Magazine",
    desc: "Shots apply a brief Hex.",
    rarity: U,
    max_stacks: 6,
    dial: { type: "status", statusId: "pistol:hex", stateMods: { pistolHexEnable: 1, pistolHexDurationMult: 0.12 } },
    mods: {},
  },
  {
    id: "p_occult_soul_pressure",
    cls: "pistol",
    name: "Occult: Soul Pressure",
    desc: "Hexed hits sustain Windup and Cyclone.",
    rarity: R,
    max_stacks: 4,
    dial: { type: "weaponState", stateMods: { pistolSoulPressureEnable: 1, pistolCycloneSustainMult: 0.08 } },
    mods: {},
  },
  {
    id: "p_occult_debt_pop",
    cls: "pistol",
    name: "Occult: Debt Pop",
    desc: "Hex detonates when it ends.",
    rarity: R,
    max_stacks: 3,
    dial: { type: "status", statusId: "pistol:debtPop", stateMods: { pistolDebtPopEnable: 1, pistolDebtPopCoeffMult: 0.12 } },
    mods: {},
  },
  {
    id: "p_keystone_reapers_vortex",
    cls: "pistol",
    name: "Occult Keystone: Reaper's Vortex",
    desc: "Cyclone warps foes; Hex pops chain (limited).",
    rarity: E,
    max_stacks: 1,
    isKeystone: true,
    dial: { type: "weaponState", stateMods: { pistolReapersVortexEnable: 1 } },
    mods: {},
  },

  // -------------------------
  // STAFF (Lightning + Occult) â€” Option A
  // -------------------------
  {
    id: "s_conduction_mark",
    cls: "staff",
    name: "Conduction Mark",
    desc: "Conduction Marks last longer. (+12% duration)",
    rarity: C,
    max_stacks: 8,
    dial: { type: "status", statusId: "staff:mark", stateMods: { staffMarkDurationMult: 0.12 } },
    mods: {},
  },
  {
    id: "s_synapse_capacity",
    cls: "staff",
    name: "Synapse Capacity",
    desc: "Marks can stack higher per target.",
    rarity: C,
    max_stacks: 5,
    dial: { type: "weaponState", stateMods: { staffMarkMaxStacksAdd: 1 } },
    mods: {},
  },
  {
    id: "s_conductivity",
    cls: "staff",
    name: "Conductivity",
    desc: "+30% chain range per stack.",
    rarity: C,
    max_stacks: 6,
    dial: { type: "stat", mods: { chainJump: 0.3 } },
    mods: { chainJump: 0.3 },
  },
  {
    id: "s_arc_count",
    cls: "staff",
    name: "Arc Count",
    desc: "+1 chain per stack.",
    rarity: C,
    max_stacks: 6,
    dial: { type: "stat", mods: { chainCount: 1 } },
    mods: { chainCount: 1 },
  },
  {
    id: "s_relay_efficiency",
    cls: "staff",
    name: "Relay Efficiency",
    desc: "Marked first target boosts the cast.",
    rarity: U,
    max_stacks: 5,
    dial: { type: "weaponState", stateMods: { staffRelayEnable: 1, staffRelayBonusMult: 0.12 } },
    mods: {},
  },
  {
    id: "s_overcharge",
    cls: "staff",
    name: "Overcharge",
    desc: "Marked hits trigger a bonus strike.",
    rarity: U,
    max_stacks: 4,
    dial: { type: "weaponState", stateMods: { staffOverchargeEnable: 1, staffOverchargeCoeffMult: 0.12 } },
    mods: {},
  },
  {
    id: "s_fork_node",
    cls: "staff",
    name: "Fork Node",
    desc: "Marked hits can fork to another target.",
    rarity: R,
    max_stacks: 3,
    dial: { type: "weaponState", stateMods: { staffForkEnable: 1, staffForkChance: 0.08 } },
    mods: {},
  },
  {
    id: "s_voltage_build",
    cls: "staff",
    name: "Voltage Build",
    desc: "Sustained circuits build Voltage for damage.",
    rarity: U,
    max_stacks: 6,
    dial: { type: "weaponState", stateMods: { staffVoltageEnable: 1, staffVoltageGain: 0.12 } },
    mods: {},
  },
  {
    id: "s_keystone_overload",
    cls: "staff",
    name: "Keystone: Overload Detonation",
    desc: "Maxed Marks detonate in a lightning burst.",
    rarity: R,
    max_stacks: 1,
    isKeystone: true,
    flagAdds: ["staff:keystone:overload"],
    dial: { type: "weaponState", stateMods: { staffOverloadEnable: 1 } },
    mods: {},
  },
  {
    id: "s_occult_binding_hex",
    cls: "staff",
    name: "Occult: Binding Hex",
    desc: "Zaps also apply a binding Hex.",
    rarity: U,
    max_stacks: 6,
    dial: { type: "status", statusId: "staff:hex", stateMods: { staffHexEnable: 1, staffHexDurationMult: 0.12 } },
    mods: {},
  },
  {
    id: "s_occult_soul_circuit",
    cls: "staff",
    name: "Occult: Soul Circuit",
    desc: "Killing marked foes grants Current.",
    rarity: R,
    max_stacks: 4,
    dial: { type: "weaponState", stateMods: { staffSoulCircuitEnable: 1, staffCurrentDurationMult: 0.12 } },
    mods: {},
  },
  {
    id: "s_keystone_contract_conduit",
    cls: "staff",
    name: "Occult Keystone: Contract Conduit",
    desc: "Overloads form links; next cast prioritizes them.",
    rarity: E,
    max_stacks: 1,
    isKeystone: true,
    requiresAny: ["staff:keystone:overload"],
    dial: { type: "weaponState", stateMods: { staffContractConduitEnable: 1 } },
    mods: {},
  },
];
